<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Program">   

   	
   	<select id="readProgram" resultType="ProgramRead">
	   select P.id, A.name as name, C.category_name as category_name, P.program_name, P.status, P.start_date, P.end_date 
		FROM swap.Program as P
		LEFT JOIN swap.Category as C  
		ON P.category_id = C.id
		LEFT JOIN swap.Admin as A
		ON P.admin_id = A.id
		where P.deldate is null
		order by P.regdate desc;
   	</select>
   	
   	<select id="readProgramInformationByProgramId" parameterType="Integer" resultType="ProgramReadById">
	   select P.program_name, C.category_name as category_name, P.quota, P.information, P.start_date, P.end_date
		FROM Program AS P
		LEFT JOIN Category as C  
		ON P.category_id = C.id
		where P.id = #{id};
   	</select>
   	
   	<insert id = "insertProgram" parameterType="Program">	
   		INSERT INTO Program (admin_id, category_id, application_form, program_name, information, start_date, end_date,quota)
		VALUES (#{admin_id}, #{category_id}, #{application_form}, #{program_name}, #{information}, #{start_date}, #{end_date},#{quota})
   	</insert>
   	
   	<update id="updateDelDate" parameterType="hashmap">
   		UPDATE Program SET deldate=now(), status = -1
		WHERE id = #{id}
   	</update>
   	
   	
</mapper>

